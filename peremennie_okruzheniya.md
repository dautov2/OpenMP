# Переменные окружения

| Название | Возможные значения  | По умолчанию* |
| -- | -- | -- |
| OMP_NUM_THREADS   | неотрицательное целое  | 1 или кол-во ядер |
| OMP_SCHEDULE | тип планирования [размер] | static |
| OMP_DYNAMIC | TRUE FALSE | TRUE |
| OMP_NESTED  | TRUE FALSE| FALSE |
| OMP_STACKSIZE | "размер [B K M G]" | - |
| OMP_WAIT_POLICY | ACTIVE PASSIVE | PASSIVE |
| OMP_MAX_ACTIVE_LEVELS | неотрицательное целое | - |
| OMP_THREAD_LIMIT | неотрицательное целое | 1024 |
| OMP_PROC_BIND |  TRUE FALSE | FALSE |
| OMP_PLACES | порядок размещения | - |
| OMP_CANCELLATION |  TRUE FALSE | FALSE |
| OMP_DISPLAY_ENV|  TRUE FALSE | FALSE |
| OMP_DEFAULT_DEVICE| неотрицательное целое | - |



Значения по умолчанию зависят от реализации. В таблице приведены чаще встречающиеся значения.


Вывод информации о версии на экран.
```

#if defined _OPENMP
  #define X_OMP_SUPPORT 1
  #define X_OMP_DATE _OPENMP
  #if X_OMP_DATE == 199710
    #define X_OMP_VERSION 100 //1.0
  #elif X_OMP_DATE == 200203
    #define X_OMP_VERSION 200 //2.0
  #elif X_OMP_DATE == 200805
    #define X_OMP_VERSION 300 //3.0
  #elif X_OMP_DATE == 201107
    #define X_OMP_VERSION 310 //3.1
  #elif X_OMP_DATE == 201307
    #define X_OMP_VERSION 400 //4.0
  #endif
#endif

//Или можно применить вывод информации о версии OpenMP

#if defined(_OPENMP)
  fprintf(stderr, "OPENMP VERSION      = %d\n", _OPENMP);
#endif
```



#### **OMP_NUM_THREADS**

Значение переменной среды **OMP_NUM_THREADS** должно быть положительным. Действие переменной зависит от того, доспускается динамическое регулирование числа потоков. Если динамическое регулирование запрещено, то значения переменной равно числу потоков, используемых для каждой параллельной области, пока это число явным образом не изменится в течение выполнения путем вызова функции **omp_set_num_threads()**

Если динамическое регулирование потоков разрешено, значение переменной среды рассматривается как максимальное число потоков, доступных для использования. Значение по умолчанию зависит от реализации.

```
setenv OMP_NUM_THREADS 8
```
#### **OMP_SCHEDULE**

**OMP_SCHEDULE** применяется только к директивам **for** и **parallel for**, которые имеют способ планирования **runtime**. Способ планирования и размер порции для всех такого рода циклов может быть установлен во время исполнения программы путём присвоения переменной среды известных значений, обозначающих способ планирования и значение размера порции если он нужен.

Для директив **for** и **parallel for**, которые имеют способ планирования, отличный от **runtime**, переменная **OMP_SCHEDULE** игнорируется. Значение по умолчанию зависит от реализации. Если оптимальный размер порции установлен, то значение должно быть положительным. Если размер порции не установлен, то предпологается значение равное 1, за исключением способа планирования static устанавливается равным значению частному от деления числа итераций цикла на число потоков, занятых в выполнении цикла.

```
setenv OMP_SCHEDULE "guided,4"
setenv OMP_SCHEDULE "dynamic"
```

#### **OMP_DYNAMIC**

Переменная среды **OMP_DYNAMIC** разрешает или запрещает динамическое регулирование потоков, доступных для выполенения параллельной области. Значение должно быть **TRUE** или **FALSE**.

Если значение переменной установлено в значение **TRUE**, число потоков, используемых для выполнения пареллельной области, может регулироваться средой времени выполнения для лучшего использования ресурсов системы.

Если значение переменной установлено в значение **FALSE**, динамическое регулирование запрещено. Значение по умолчанию зависит от реализации.
```
setenv OMP_DYNAMIC TRUE
```

#### ** OMP_NESTED **

Переменная среды **OMP_NESTED** разрешает или запрещает вложенный параллелизм. Если значение переменной установлено в значение **TRUE**, вложенный параллелизм разрешен; если установлено в значении **FALSE**, вложенный параллелизм запрещен.Значение по умолчению равно **FALSE**. 

```
setenv OMP_NESTED TRUE
```
#### **OMP_STACKSIZE**


Переменная среды окружения **OMP_STACKSIZE** позволяет установить размер стека для потоков создаваемых OpenMP. Данная переменная принимает следующие формы:

размер | размер**B** | размер**K** | размер**M** | размер**G**

где *размер* это положительное целочисленное, которое устанавливает размер стека.

**B K  M  G ** -  специфизирует заданный размер в единицах измерения Байтах(**B**ytes), Килобайтах(**K**ilobytes), Мегабайтах(**M**egabytes) или Гигабайтах(**G**igabytes). По умолчанию размер задается в килобайтах.


```
setenv OMP_STACKSIZE 2000500B
setenv OMP_STACKSIZE "3000 k "
setenv OMP_STACKSIZE 10M
setenv OMP_STACKSIZE " 10 M "
setenv OMP_STACKSIZE "20 m "
setenv OMP_STACKSIZE " 1G"
setenv OMP_STACKSIZE 20000 
```
#### **OMP_WAIT_POLICY**
#### **OMP_MAX_ACTIVE_LEVELS**
#### **OMP_CANCELLATION**
#### **OMP_DISPLAY_ENV**
