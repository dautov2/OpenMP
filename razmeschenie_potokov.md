# Размещение потоков

По умолчению, OpenMP потокам разрешено мигрировать между логическими и физическими ядрами во время выполения приложения. Это часто становится причиной падения производительности. Поток мигрирует с физического ядра на другое он и при этом теряет доступ к данным, находящимся в локалном кэше ядра. Данные, для дальнейшей работы, нужно заново загружать в локальный кэш нового ядра. Увеличить производительность приложение возможно путем привязки OpenMP потоков к логическими или физическими ядрам.Привязка потоков называется thread affinity.

В различных компиляторах до принятия стандарта OpenMP 4.0 были собственные реализации шаблонов размещения потоков. Например, KMP_AFFINITY, для компиляторов от компании Intel.

Теперь же стандартизирована политика размещения потоков. Как размещать потоки мы может указать в коде или же через переменные окружения.

```
#pragma omp parallel proc_bind(spread)

#pragma omp parallel proc_bind(close)

#pragma omp parallel proc_bind(master)


Переменные окружения 

export OMP_PROC_BIND=

export OMP_PLACES=

```

