# Критические секции

#####*В очередь, сукины дети, в очередь!*
###### Михаил Афанасьевич Булгаков. Собачье сердце


```
#pragma omp critical (name) 
```
Критическая секция 

Всегда именуйте критические секции.
Согласно стандарту все критические секции без имени, будут ассоциированы одним именем. 
Присвоение имени позволит вам одновременно выполнять две и более критические секции одновременно.



```
#pragma omp critical  
{
    doworkA();
}
#pragma omp critical 
{
    doworkB();
}
//Сначало будет завершено   doworkA() , а только потом doworkB()



#pragma omp critical (first) 
{
    doworkA();
}
#pragma omp critical (second) 
{
    doworkB();
}

//doworkA () и doworkB() будут выполнены одновременно 

```
Однако, есть случаи когда этого делать не стоит. К примеру, не стоит делать именованные критические секции для вывода данных на экран или же в один файл.
```
#include <stdio.h> 
#include <omp.h> 
int main(int argc, char *argv[]) 
{ 
    int n; 
 
    #pragma omp parallel 
    { 
        #pragma omp critical 
        { 
            n = omp_get_thread_num(); 
            printf("Нить %d\n", n); 
        } 
    } 
}

//omp_get_thread_num() - библиотечная функция которая возвращает номер потока.
```
